var common={init:function(){$("body").on("touchstart",function(){});common.copyright();common.autoSize();$(window).resize(common.autoSize)},autoSize:function(){var w=$(window).width();var h=$(window).height();if(h/w<1.3){$(".wraper").height(1.3*w)}else{$(".wraper").height(h)}},loading:function(){var num=$(".loading").length;if(num==0){var html='<div class="loading"><div class="layer"></div><div class="gif"><div class="typing_loader"></div></div></div>';$("body").append(html)}$(".loading").show()},unloading:function(){$(".loading").hide()},alert:function(result,txt,type){$(".alert,.loading").remove();var style="ok";if(result==0){style="fail"}else if(result==1){style="ok"}var csscon="";if(typeof type!="undefined"){csscon="width:80%;margin-left:-40%;height:200px;margin-top:-100px;"}var html='<div class="alert"><div class="layer"></div><div class="box" style="'+csscon+'"></div><div class="con '+style+'" style="'+csscon+'"><div class="txt">'+txt+'</div><div class="close"></div></div></div>';$("body").append(html);$(".alert .close").on("touchend",function(){$(".alert").remove()});if(result==1){}},copyright:function(config){if(typeof config=="undefined"){if($(".wraper").length==0)return;var scrHeight=$(".wraper")[0].scrollHeight;var winHeight=$(window).height();if(scrHeight==winHeight){$(".copyright").css("position","absolute")}else{$(".copyright").css("position","relative")}}else{if(typeof config.fontSize=="undefined")config.fontSize=1;if(typeof config.color=="undefined")config.color="gray";if(typeof config.zIndex=="undefined")config.zIndex=9999;var html='<div id="hls_copyright">';html+="<style>#hls_copyright{position:fixed;width:100%;font-size:"+config.fontSize+"rem;color:"+config.color+";height:"+config.fontSize+"rem; line-height:"+config.fontSize+"rem;padding:0 0 "+config.fontSize/2+"rem 0;text-align: center;bottom: 0;z-index:"+config.zIndex+";}";html+="#hls_copyright a,#hls_copyright a:visited{font-size:"+config.fontSize+"rem;color:"+config.color+";display: inline-block;border-bottom: "+config.fontSize/10+"rem solid "+config.color+"; text-decoration: none;}";html+="#hls_copyright a:active{text-decoration: none; color: #333;}</style>";html+='<a href="/about.html" target="_blank">爱创科技</a> · 提供技术支持</div>';$("body").append(html)}}};$(function(){common.init();$.ajaxSetup({xhrFields:{withCredentials:true}})});function accAdd(arg1,arg2){var r1,r2,m,c;try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}c=Math.abs(r1-r2);m=Math.pow(10,Math.max(r1,r2));if(c>0){var cm=Math.pow(10,c);if(r1>r2){arg1=Number(arg1.toString().replace(".",""));arg2=Number(arg2.toString().replace(".",""))*cm}else{arg1=Number(arg1.toString().replace(".",""))*cm;arg2=Number(arg2.toString().replace(".",""))}}else{arg1=Number(arg1.toString().replace(".",""));arg2=Number(arg2.toString().replace(".",""))}return(arg1+arg2)/m}Number.prototype.add=function(arg){return accAdd(arg,this)};function accSub(arg1,arg2){var r1,r2,m,n;try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}m=Math.pow(10,Math.max(r1,r2));n=r1>=r2?r1:r2;return((arg1*m-arg2*m)/m).toFixed(n)}Number.prototype.sub=function(arg){return accSub(this,arg)};function accMul(arg1,arg2){var m=0,s1=arg1.toString(),s2=arg2.toString();try{m+=s1.split(".")[1].length}catch(e){}try{m+=s2.split(".")[1].length}catch(e){}return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)}Number.prototype.mul=function(arg){return accMul(this,arg)};function accDiv(arg1,arg2){var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}with(Math){r1=Number(arg1.toString().replace(".",""));r2=Number(arg2.toString().replace(".",""));return r1/r2*pow(10,t2-t1)}}Number.prototype.div=function(arg){return accDiv(this,arg)};var hlsjs={lecode:null,getQueryString:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return null},getSegment:function(index){var pathArr=window.location.pathname.split("/");return pathArr[index]},getRootUrl:function(){var search=window.location.search;var params=search.split("&");var env=params[params.length-1].split("=");if(typeof window.isScan!=="undefined"){return"http://"+window.location.hostname+"/"}if(env.length===1){return"http://m.lsa0.cn/"}env=env[1];if(env==="test"){return"http://test.m.lsa0.cn/"}if(env==="dev"){return"http://dev.m.lsa0.cn/"}return"http://m.lsa0.cn/"},getRptUrl:function(){var hostName=window.location.hostname;if(hostName=="dev.m.lsa0.cn"){return"http://dev.rpt.lsa0.cn"}else if(hostName=="test.m.lsa0.cn"){return"http://test.rpt.lsa0.cn"}else return"http://rpt.lsa0.cn"},getCurrentUser:function(callback){$.ajax({url:hlsjs.getRootUrl()+"hlsjs/get_current_user",success:function(result){callback(result)},error:function(XMLHttpRequest,textStatus,errorThrown){alert("Status: "+textStatus);alert("Error: "+errorThrown)}})}};hlsjs.init=function(options){hlsjs.options=options;hlsjs.wx=function(apilist){if(navigator.userAgent.indexOf("MicroMessenger")>0&&wx){var jsapilist=["scanQRCode","getLocation","hideOptionMenu","onMenuShareAppMessage","hideAllNonBaseMenuItem","hideMenuItems","showMenuItems"];if(apilist!=undefined){apilist.forEach(function(value){jsapilist.push(value)})}wx.config({debug:this.options.debug,appId:this.options.appId,timestamp:this.options.timestamp,nonceStr:this.options.nonceStr,signature:this.options.signature,jsApiList:jsapilist});return wx}return undefined};hlsjs.takeActivity=function(callback){$.ajax({url:hlsjs.getRootUrl()+"activity/take",data:{code:hlsjs.lecode},success:function(result){if(result.errcode==0||result.errcode==3){callback.call(window,result)}else{callback.call(window,result)}},error:function(XMLHttpRequest,textStatus,errorThrown){alert("Status: "+textStatus);alert("Error: "+errorThrown)}})};hlsjs.getUserInfo=function(callback){$.ajax({url:hlsjs.getRootUrl()+"hlsjs/get_user_info",data:{code:hlsjs.lecode},success:function(result){if(result.errcode==0){callback.call(window,result)}else{alert(result.errmsg+"。")}},error:function(XMLHttpRequest,textStatus,errorThrown){alert("Status: "+textStatus);alert("Error: "+errorThrown)}})};hlsjs.watchLocation=function(pos,code,done,fail){$.ajax({url:hlsjs.getRootUrl()+"activity/get_best_match",data:{code:window.lecode,pos:pos}}).done(done).fail(fail)};hlsjs.getLocation=function(successCallback,failCallback){var wx=this.wx();var pos={lng:0,lat:0};if(wx==undefined){if(failCallback==undefined)return;return failCallback(pos)}return wx.ready(function(){wx.getLocation({type:"wgs84",success:function(res){if(successCallback==undefined){return}return successCallback({lng:res.longitude,lat:res.latitude})},cancel:function(res){console.log("canceled");if(failCallback==undefined)return;return failCallback(pos)},fail:function(res){console.log("failed");if(failCallback==undefined)return;return failCallback(pos)}})})};hlsjs.scanQRCode=function(options){var wx=hlsjs.wx();if(wx==undefined){alert("请在微信客户端中打开");return}wx.ready(function(){wx.scanQRCode(options)})}};hlsjs.ready=function(arg){var data={url:window.location.href};var callback=undefined;if(typeof arg=="object"){if(arg.appid!=undefined){data.appid=arg.appid}else if(arg.mchid!=undefined){data.mchid=arg.mchid}if(data.appid==undefined&&data.mchid==undefined){alert("请填写appid或mchid");return}callback=arg.success}else if(typeof arg=="function"){callback=arg}$.ajax({url:hlsjs.getRootUrl()+"weixin/jssignature",data:data}).done(function(result){if(result.errcode==0){hlsjs.lecode=result.options.code;hlsjs.init(result.options);if(typeof callback==="function"){callback.call(window,result.options)}}else{alert(result.errmsg+"。")}}).fail(function(data){alert("无法连接服务器。")})};